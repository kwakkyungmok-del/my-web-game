<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë¬´ê¸° ê°•í™” ì‹œë®¬ë ˆì´í„°</title>
<style>
body {
    margin: 0;
    padding: 0;
    background: #111;
    color: #fff;
    font-family: Arial;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.box {
    background: #1f1f1f;
    padding: 20px;
    border-radius: 12px;
    width: 400px;
    text-align: center;
}
#weaponIcon {
    font-size: 48px;
}
button {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
    border: none;
    border-radius: 6px;
    background: #3b82f6;
    color: white;
    font-size: 16px;
    cursor: pointer;
}
button:hover {
    background: #2563eb;
}
.collection {
    background: #000;
    padding: 10px;
    margin-top: 10px;
    max-height: 200px;
    overflow-y: auto;
    font-size: 14px;
    border-radius: 6px;
}
#log {
    margin-top: 10px;
    font-size: 14px;
    color: #a3a3a3;
}

/* ================== ëª¨ë°”ì¼ ëŒ€ì‘ ================== */
@media (max-width: 768px) {
    body {
        height: auto;
        padding: 10px;
    }

    .box {
        width: 95%;
        padding: 15px;
        border-radius: 10px;
    }

    #weaponIcon {
        font-size: 36px;
    }

    button {
        font-size: 16px;
        padding: 12px;
    }

    .collection {
        max-height: 160px;
        font-size: 13px;
    }
}
</style>
</head>
<body>

<div class="box">
    <div id="weaponIcon">ğŸ—¡ï¸</div>
    <h2 id="weaponName">ë‚¡ì€ ê²€</h2>
    <p>ë ˆë²¨: <span id="level">0</span></p>
    <p>ê³¨ë“œ: <span id="gold">1000</span> G</p>

    <button onclick="upgrade()">ê°•í™”í•˜ê¸°</button>
    <button onclick="sell()">íŒë§¤</button>

    <!-- ê°œë°œì ë²„íŠ¼ -->
    <button id="devAddGoldBtn" style="display:none; background:#22c55e; color:black;">ğŸ’° +1000G</button>
    <button id="devLevelUpBtn" style="display:none; background:#a855f7; color:white;">â¬†ï¸ +10 ë ˆë²¨</button>
    <button id="devNoBreakBtn" style="display:none; background:#ef4444; color:white;">ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€: OFF</button>

    <div class="collection" id="collection"></div>
    <div id="log"></div>
</div>

<script>
let level = 0;
let gold = 1000;
let noBreakMode = false;

const stageNames = [
    "ë‚¡ì€",        // 0~4
    "ë‹¨ë‹¨í•œ",      // 5~9
    "ê°•ì² ",        // 10~14
    "ë¶ˆíƒ€ëŠ”",      // 15~19
    "ìš©ì˜",        // 20~24
    "ì‹¬ì—°ì˜",      // 25~29
    "ì²œìƒì˜",      // 30~34
    "ì°¨ì›ì˜",      // 35~39
    "ì‹ í™”ì˜",      // 40~44
    "ì¢…ë§ì˜"       // 45+
];

function getStageName(lv) {
    const index = Math.min(Math.floor(lv / 5), stageNames.length - 1);
    return stageNames[index];
}

function updateWeapon() {
    document.getElementById("level").innerText = level;
    document.getElementById("weaponName").innerText = `${getStageName(level)} ê²€`;
    document.getElementById("weaponIcon").innerText = level >= 55 ? "ğŸ”¥ğŸ—¡ï¸ğŸ”¥" : "ğŸ—¡ï¸";
}

function updateGold() {
    document.getElementById("gold").innerText = gold;
}

function log(msg) {
    document.getElementById("log").innerText = msg;
}

function upgrade() {
    const cost = 100;
    if (gold < cost) {
        log("ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
        return;
    }

    gold -= cost;

    const successRate = Math.max(100 - level * 2, 5);
    const roll = Math.random() * 100;

    if (roll < successRate) {
        level++;
        log("ê°•í™” ì„±ê³µ!");
    } else {
        if (Math.random() < 0.05) {
            if (noBreakMode) {
                log("ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€ ë°œë™! ë¬´ê¸° ë³´í˜¸ë¨");
            } else {
                log("ğŸ’¥ ë¬´ê¸° íŒŒê´´! ìƒˆ ë¬´ê¸° ì§€ê¸‰");
                level = 0;
            }
        } else {
            log("ê°•í™” ì‹¤íŒ¨...");
        }
    }

    updateWeapon();
    updateGold();
}

function sell() {
    const price = level * 50;
    gold += price;
    log(`${price}Gì— íŒë§¤ ì™„ë£Œ`);
    level = 0;
    updateWeapon();
    updateGold();
}

/* ================== ê°œë°œì ëª¨ë“œ ================== */
if (!localStorage.getItem("isDeveloper")) {
    document.addEventListener("keydown", e => {
        if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "d") {
            localStorage.setItem("isDeveloper", "true");
            alert("ê°œë°œì ëª¨ë“œ í™œì„±í™”");
            location.reload();
        }
    });
}

if (localStorage.getItem("isDeveloper") === "true") {
    document.getElementById("devAddGoldBtn").style.display = "block";
    document.getElementById("devLevelUpBtn").style.display = "block";
    document.getElementById("devNoBreakBtn").style.display = "block";
}

document.getElementById("devAddGoldBtn").onclick = () => {
    gold += 1000;
    updateGold();
    log("ğŸ’° ê°œë°œì: 1000G ì¶”ê°€");
};

document.getElementById("devLevelUpBtn").onclick = () => {
    level += 10;
    updateWeapon();
    log("â¬†ï¸ ê°œë°œì: +10 ë ˆë²¨");
};

document.getElementById("devNoBreakBtn").onclick = () => {
    noBreakMode = !noBreakMode;
    document.getElementById("devNoBreakBtn").innerText = noBreakMode
        ? "ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€: ON"
        : "ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€: OFF";
    log(noBreakMode ? "ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€ í™œì„±í™”" : "ğŸ›¡ï¸ íŒŒê´´ ë°©ì§€ ë¹„í™œì„±í™”");
};

updateWeapon();
updateGold();
</script>

</body>
</html>
