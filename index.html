<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>내 게임 모음집</title>

    <!-- favicon: images 폴더에 넣은 경우 -->
    <link rel="icon" href="/favicon_io" type="image/x-icon">

    <style>
        body { margin:0; background:#0f0f0f; color:#fff; font-family:Arial, sans-serif; }
        h1 { text-align:center; padding:30px 0; }
        .container { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; padding:20px; }
        .card { background:#1c1c1c; border-radius:12px; padding:20px; cursor:pointer; transition:0.2s; }
        .card:hover { transform:scale(1.05); background:#2a2a2a; }
        #boardBtn, #showRankingBtn { position:fixed; padding:10px 15px; font-size:16px; border:none; border-radius:5px; cursor:pointer; box-shadow:0 2px 5px rgba(0,0,0,0.3); }
        #boardBtn { top:20px; right:20px; background:#0a84ff; color:#fff; }
        #boardBtn:hover { background:#006be6; }
        #showRankingBtn { top:20px; left:20px; background:#6366f1; color:#fff; }
        #showRankingBtn:hover { background:#4f46e5; }
   #noticeBtn { 
    position: fixed;
    top:20px;       /* 상단 */
    left:150px;     /* 강화 순위 버튼 오른쪽으로 약간 띄움 */
    background:#f59e0b; 
    color:#000; 
    padding:10px 15px;
    font-size:16px;
    border:none;
    border-radius:5px;
    cursor:pointer;
    box-shadow:0 2px 5px rgba(0,0,0,0.3);
}
#noticeBtn:hover { background:#d97706; }


        #rankingModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; }
        #rankingModal div { background:#1a1a1a; padding:20px; border-radius:12px; width:300px; max-width:90%; text-align:left; }
        #rankingModal h3 { margin-top:0; }
        .container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}
        #noticeModal {
    display:none; 
    position:fixed; 
    top:0; left:0; width:100%; height:100%; 
    background:rgba(0,0,0,0.8); 
    justify-content:center; 
    align-items:center;
    z-index:1000;
}
#noticeModal .modalBox {
    background:#1a1a1a; 
    padding:20px; 
    border-radius:12px; 
    width:320px; 
    max-height:80%; 
    overflow-y:auto;
    box-shadow:0 2px 8px rgba(0,0,0,0.5);
}
#noticeModal button {
    width:100%; 
    margin-top:10px; 
    padding:8px; 
    border:none; 
    border-radius:6px; 
    cursor:pointer;
}
/* 모바일 대응 */
/* 모바일 전용 UI */
@media (max-width: 768px) {
    h1 {
        font-size: 22px;
        padding: 20px 0;
    }

    /* 카드 그리드 1열 */
    .container {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 15px !important;
        padding: 10px !important;
    }

    /* 카드 크기와 패딩 조정 */
    .card {
        padding: 15px !important;
        font-size: 14px !important;
    }

    /* 버튼 위치 재조정 */
    #boardBtn, #showRankingBtn, #noticeBtn {
        top: auto !important;
        bottom: 10px !important;
        left: 10px !important;
        right: auto !important;
        font-size: 14px !important;
        padding: 8px 12px !important;
    }

    /* 버튼 겹치지 않게 배치 */
    #showRankingBtn { left: 10px; bottom: 60px; }
    #boardBtn { left: 10px; bottom: 110px; }
    #noticeBtn { left: 10px; bottom: 160px; }

    /* 랭킹 모달 */
    #rankingModal div {
        width: 90% !important;
        max-width: 320px !important;
        padding: 15px !important;
    }

    /* 공지 모달 */
    #noticeModal .modalBox {
        width: 90% !important;
        max-width: 320px !important;
        padding: 15px !important;
        max-height: 70% !important;
        overflow-y: auto !important;
    }
}

/* 전투 게임 버튼만 크기 줄이기 */
.card.reverse {
    padding: 15px;       /* 기존 20px -> 15px로 줄임 */
    font-size: 14px;     /* 글씨 조금 줄임 */
}
.card.reverse h2 {
    font-size: 18px;     /* 제목 크기 조정 */
}
.card.reverse p {
    font-size: 12px;     /* 설명 글씨 줄임 */
}

    </style>
</head>
<body>

<h1>🎮 내 게임 모음집</h1>

<div class="container">
    <div class="card" onclick="location.href='games/upgrade/'">
        <h2>⚔️ 무기 강화 시뮬레이터</h2>
        <p>무기를 강화하고 수식어를 모아보자</p>
    </div>
    <div class="card" onclick="location.href='cardgame/'">
        <h2>🃏 카드 게임</h2>
        <p>판타지 세상의 카드 전투</p>
    </div>
</div>

<button id="boardBtn">📜 자유 게시판</button>
<button id="showRankingBtn">⚔️ 강화 순위</button>
<button id="noticeBtn">📢 공지사항</button>


<div id="rankingModal">
  <div>
    <h3>🔥 강화 순위 Top 3</h3>
    <div id="rankingList" style="margin:10px 0;"></div>
    <button id="closeRankingBtn" style="width:100%;">닫기</button>
  </div>
</div>
    
<div id="noticeModal">
  <div class="modalBox">
    <h3>📢 공지사항</h3>
    <div id="noticeText" style="line-height:1.4;"></div>
    <button id="closeNoticeBtn">닫기</button>
  </div>
</div>
<div class="card reverse" onclick="location.href='battleGame/'">
    <h2>⚔️ 전투 게임</h2>
    <p>강화한 무기를 이용한 캐릭터 전투</p>
</div>




<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // Supabase 중복 선언 방지
    if(!window.sb){
        const SUPABASE_URL = "https://lpgcfyisclihwlvlxent.supabase.co";
        const SUPABASE_KEY = "sb_publishable_ftA0tc3gS_v48aDVFFpF3g_velgD4y9";
        window.sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
    }

    /* 게시판 이동 */
    document.getElementById('boardBtn').onclick = () => { location.href = 'board/'; };

    /* 강화 순위 */
    const rankingModal = document.getElementById("rankingModal");
    const rankingList = document.getElementById("rankingList");
    document.getElementById("showRankingBtn").onclick = async () => {
        try{
            const { data, error } = await sb.from('swordRankings')
                .select('owner,weapon,level,created_at')
                .order('level',{ascending:false})
                .limit(3);
            if(error) throw error;
            if(!data || data.length===0){
                alert("등록된 검이 없습니다.");
                return;
            }
            let html = "";
            data.forEach((rec,idx)=>{
                html += `${idx+1}. ${rec.owner} - ${rec.weapon} Lv.${rec.level}<br>`;
            });
            rankingList.innerHTML = html;
            rankingModal.style.display = "flex";
        } catch(e){
            alert("불러오기 실패:"+e.message);
        }
    };
    document.getElementById("closeRankingBtn").onclick = ()=>{ rankingModal.style.display="none"; };
    /* 기본: PC 기준 */

const noticeModal = document.getElementById("noticeModal");
const noticeText = document.getElementById("noticeText");

// 여기에 공지 글 입력
const noticeContent = `
업데이트 완료
내용 : 
무기 강화 시 뜨는 이미지 변경(5레벨마다 바뀜) / 
무기 판매 시 판매가 변경
1레벨 -> 20G
2레벨 -> 30G
*
5레벨 -> 100G
6레벨 -> 150G
*
`;

// 버튼 클릭 시 모달 표시
document.getElementById("noticeBtn").onclick = () => {
    noticeText.innerHTML = noticeContent;
    noticeModal.style.display = "flex";
}

// 닫기 버튼
document.getElementById("closeNoticeBtn").onclick = () => {
    noticeModal.style.display = "none";
}


</script>

</body>
</html>

