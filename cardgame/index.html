<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì „íˆ¬í˜• ì¹´ë“œ ê²Œì„</title>
<style>
body { font-family: Arial, sans-serif; background:#111; color:#eee; text-align:center; }
h1 { margin-top:20px; }
#cardPool, #battlePhase { display:flex; justify-content:center; flex-wrap:wrap; margin-top:20px; gap:10px; }
.card { width:100px; height:140px; background:#333; border-radius:10px; cursor:pointer; display:flex; align-items:center; justify-content:center; flex-direction:column; font-size:18px; transition:0.2s; position:relative; }
.card:hover { transform:scale(1.05); background:#444; }
.card.selected { border:3px solid #0af; }
.card.attack { background:#0af; transform:scale(1.1);}
#log { margin-top:20px; height:30px; }
button { padding:8px 15px; margin:10px; cursor:pointer; border:none; border-radius:5px; font-size:14px;}
#rulesDiv { display:none; position:fixed; top:50px; left:50%; transform:translateX(-50%); background:#222; color:white; padding:20px; border-radius:10px; z-index:100; max-width:90%; }
</style>
</head>
<body>

<h1>ğŸƒ ì „íˆ¬í˜• ì¹´ë“œ ê²Œì„</h1>

<div>
<button onclick="showRules()">ê·œì¹™</button>
<button onclick="goBack()">ëŒì•„ê°€ê¸°</button>
<button id="restartBtn" onclick="restartGame()" style="display:none;">ë‹¤ì‹œ ì‹œì‘</button>
</div>

<div id="rulesDiv">
<h3>ê·œì¹™</h3>
<ul style="text-align:left;">
<li>ì¹´ë“œ ì†ì„±: ë¶ˆ ğŸ”¥, ë¬¼ ğŸ’§, í’€ ğŸŒ¿, ë•… ğŸŒ, ì²  â›“, ë…¸ë§ âšª</li>
<li>ì†ì„± ìƒì„±: ë¶ˆ>í’€>ë•…>ì² >ë¬¼>ë¶ˆ, ë…¸ë§ì€ ê·¸ëƒ¥</li>
<li>ê³µê²©ë ¥/ë°©ì–´ë ¥/HP í‘œì‹œ</li>
<li>ìƒëŒ€ ì¹´ë“œ HP 0ë˜ë©´ ì œê±°. ë¨¼ì € 5ì¥ ì œê±°í•˜ë©´ ìŠ¹ë¦¬</li>
</ul>
<button onclick="hideRules()">ë‹«ê¸°</button>
</div>

<div id="cardPool"></div>

<div id="battlePhase" style="display:none;">
<h2>ì „íˆ¬ ì‹œì‘!</h2>
<div>ë‚´ ì¹´ë“œ</div>
<div id="playerDeckDiv" style="display:flex; justify-content:center; gap:10px;"></div>
<div>ìƒëŒ€ ì¹´ë“œ</div>
<div id="compDeckDiv" style="display:flex; justify-content:center; gap:10px;"></div>
</div>

<div id="log"></div>

<script>
const allCards = [
 {name:"ë„ì ",emoji:"ğŸ§¥",atk:3,def:2,hp:5,attr:"ë…¸ë§"},
 {name:"ë“œë˜ê³¤",emoji:"ğŸ²",atk:5,def:4,hp:7,attr:"ë¶ˆ"},
 {name:"ë§ˆë²•ì‚¬",emoji:"ğŸ§™â€â™‚ï¸",atk:4,def:3,hp:6,attr:"ë¬¼"},
 {name:"ê¸°ì‚¬",emoji:"ğŸ›¡ï¸",atk:4,def:4,hp:6,attr:"ì² "},
 {name:"ì—˜í”„",emoji:"ğŸ§",atk:3,def:3,hp:5,attr:"í’€"},
 {name:"ê³¨ë ˜",emoji:"ğŸ’€",atk:5,def:5,hp:8,attr:"ë•…"},
 {name:"ì•…ë§ˆ",emoji:"ğŸ˜ˆ",atk:5,def:2,hp:6,attr:"ë¶ˆ"},
 {name:"ì²œì‚¬",emoji:"ğŸ‘¼",atk:4,def:4,hp:7,attr:"ë…¸ë§"},
 {name:"ëŠ‘ëŒ€",emoji:"ğŸº",atk:3,def:2,hp:5,attr:"í’€"},
 {name:"ì¢€ë¹„",emoji:"ğŸ§Ÿ",atk:2,def:3,hp:5,attr:"ë…¸ë§"},
 {name:"í•´ì ",emoji:"ğŸ´â€â˜ ï¸",atk:3,def:3,hp:6,attr:"ë¬¼"},
 {name:"ìš”ì •",emoji:"ğŸ§š",atk:2,def:2,hp:4,attr:"í’€"},
 {name:"ê³ ë¸”ë¦°",emoji:"ğŸ‘¹",atk:2,def:2,hp:4,attr:"ë…¸ë§"},
 {name:"ì‚¬ì œ",emoji:"ğŸ§‘â€ğŸ¦³",atk:3,def:2,hp:5,attr:"ë¬¼"},
 {name:"ëŠ‘ëŒ€ì¸ê°„",emoji:"ğŸ§›â€â™‚ï¸",atk:4,def:3,hp:6,attr:"ì² "},
 {name:"ë“œì›Œí”„",emoji:"ğŸª“",atk:3,def:4,hp:6,attr:"ë•…"},
 {name:"ì‚¬ì",emoji:"ğŸ¦",atk:4,def:3,hp:6,attr:"ë¶ˆ"},
 {name:"í˜¸ë‘ì´",emoji:"ğŸ¯",atk:5,def:3,hp:7,attr:"ë…¸ë§"},
 {name:"ì²œë‘¥ì‹ ",emoji:"âš¡",atk:5,def:4,hp:7,attr:"ì² "},
 {name:"ë‹Œì",emoji:"ğŸ”ª",atk:4,def:2,hp:5,attr:"í’€"},
 {name:"ë§ˆë…€",emoji:"ğŸ§™â€â™€ï¸",atk:3,def:3,hp:6,attr:"ë¶ˆ"},
 {name:"ì‚¬ì‹ ",emoji:"â˜ ï¸",atk:5,def:5,hp:8,attr:"ë…¸ë§"}
];

let cardPoolDiv=document.getElementById('cardPool');
let playerDeckDiv=document.getElementById('playerDeckDiv');
let compDeckDiv=document.getElementById('compDeckDiv');
let logDiv=document.getElementById('log');

let cardPool=[],playerDeck=[],compDeck=[];
let selectingCount=0;
let playerSelect=null;
let targetSelect=null;
let playerTurn=true;

function log(msg){ logDiv.textContent=msg; }

function showRules(){ document.getElementById('rulesDiv').style.display='block'; }
function hideRules(){ document.getElementById('rulesDiv').style.display='none'; }
function goBack(){ window.location.href='https://kwakkyungmok-del.github.io/my-web-game/'; }

function initPool(){
    cardPool=[...allCards];
    cardPoolDiv.innerHTML='';
    cardPool.forEach((c,i)=>{
        let cardEl=document.createElement('div');
        cardEl.className='card';
        cardEl.textContent='â“';
        cardEl.onclick=()=>selectPoolCard(i,cardEl);
        cardPoolDiv.appendChild(cardEl);
    });
    log('ì¹´ë“œ 5ì¥ ì„ íƒí•˜ì„¸ìš”');
}

function selectPoolCard(idx,el){
    if(selectingCount>=5) return;
    let selected=cardPool[idx];
    playerDeck.push(selected);
    el.style.background='#0af';
    el.textContent=selected.emoji+' '+selected.name;
    selectingCount++;
    log(`ì„ íƒí•œ ì¹´ë“œ ${selectingCount}/5`);
    if(selectingCount===5) startBattle();
}

function startBattle(){
    cardPoolDiv.style.display='none';
    document.getElementById('battlePhase').style.display='block';
    // ì»´í“¨í„° ë± 5ì¥ ì„ íƒ
    let compPool=allCards.filter(c=>!playerDeck.includes(c));
    while(compDeck.length<5){
        let r=Math.floor(Math.random()*compPool.length);
        compDeck.push(compPool.splice(r,1)[0]);
    }
    renderBattleDecks();
    log('ì „íˆ¬ ì‹œì‘! ê³µê²©í•  ë‚´ ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”.');
}

function renderBattleDecks(){
    playerDeckDiv.innerHTML='';
    compDeckDiv.innerHTML='';
    playerDeck.forEach((c,i)=>{
        let cardEl=document.createElement('div');
        cardEl.className='card';
        cardEl.innerHTML=`${c.emoji}<br>${c.name}<br>HP:${c.hp}`;
        cardEl.onclick=()=>{ if(playerTurn) selectAttackCard(i); };
        if(playerSelect===i) cardEl.classList.add('attack');
        playerDeckDiv.appendChild(cardEl);
    });
    compDeck.forEach((c,i)=>{
        let cardEl=document.createElement('div');
        cardEl.className='card';
        cardEl.innerHTML=`${c.emoji}<br>HP:${c.hp}`;
        cardEl.onclick=()=>{ if(playerTurn && playerSelect!=null) attackComputer(i); };
        compDeckDiv.appendChild(cardEl);
    });
}

function selectAttackCard(i){
    if(playerSelect!=null) return;
    playerSelect=i;
    renderBattleDecks();
    log('ìƒëŒ€ ì¹´ë“œ ì„ íƒ í›„ ê³µê²©í•˜ì„¸ìš”.');
}

function attackComputer(i){
    if(playerSelect===null) return;
    targetSelect=i;
    let attacker=playerDeck[playerSelect];
    let target=compDeck[targetSelect];
    let dmg=attacker.atk;
    target.hp-=dmg;
    log(`${attacker.name}(ì´)ê°€ ${target.name}ì—ê²Œ ${dmg} ë°ë¯¸ì§€!`);
    if(target.hp<=0){
        compDeck.splice(targetSelect,1);
        log(`${target.name} íŒ¨ë°°!`);
    }
    playerSelect=null;
    targetSelect=null;
    renderBattleDecks();
    checkVictory();
    if(compDeck.length>0){
        playerTurn=false;
        setTimeout(compAttack,500);
    }
}

function compAttack(){
    let attackerIdx=Math.floor(Math.random()*compDeck.length);
    let targetIdx=Math.floor(Math.random()*playerDeck.length);
    let attacker=compDeck[attackerIdx];
    let target=playerDeck[targetIdx];
    target.hp-=attacker.atk;
    log(`ìƒëŒ€ ê³µê²©ì¤‘! ${attacker.name}(ì´)ê°€ ${target.name}ì—ê²Œ ${attacker.atk} ë°ë¯¸ì§€!`);
    if(target.hp<=0){
        playerDeck.splice(targetIdx,1);
        log(`${target.name} íŒ¨ë°°!`);
    }
    renderBattleDecks();
    checkVictory();
    playerTurn=true;
}

function checkVictory(){
    if(compDeck.length===0){
        log('ìŠ¹ë¦¬!');
        document.getElementById('restartBtn').style.display='inline';
    } else if(playerDeck.length===0){
        log('íŒ¨ë°°!');
        document.getElementById('restartBtn').style.display='inline';
    }
}

function restartGame(){
    cardPoolDiv.style.display='flex';
    cardPoolDiv.innerHTML='';
    document.getElementById('battlePhase').style.display='none';
    playerDeck=[];
    compDeck=[];
    selectingCount=0;
    playerSelect=null;
    targetSelect=null;
    playerTurn=true;
    initPool();
}

initPool();
</script>
</body>
</html>
