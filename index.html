<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë‚´ ê²Œì„ ëª¨ìŒì§‘</title>
<style>
body { margin: 0; background: #0f0f0f; color: white; font-family: Arial, sans-serif; }
h1 { text-align: center; padding: 30px 0; }
.container { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; padding: 20px; }
.card { background: #1c1c1c; border-radius: 12px; padding: 20px; cursor: pointer; transition: 0.2s; }
.card:hover { transform: scale(1.05); background: #2a2a2a; }
#boardBtn { position: fixed; top: 20px; right: 20px; z-index: 9999; padding: 10px 15px; font-size: 16px; background: #0a84ff; color: white; border: none; border-radius: 5px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
#boardBtn:hover { background: #006be6; }
#showRankingBtn { position: fixed; top: 20px; left: 20px; padding: 10px 15px; font-size: 16px; background: #6366f1; color: white; border: none; border-radius: 5px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
#showRankingBtn:hover { background: #4f46e5; }
#rankingModal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); justify-content: center; align-items: center; }
#rankingModal div { background: #1a1a1a; padding: 20px; border-radius: 12px; width: 300px; max-width: 90%; text-align: left; }
#rankingModal h3 { margin-top: 0; }
</style>
</head>
<body>

<h1>ğŸ® ë‚´ ê²Œì„ ëª¨ìŒì§‘</h1>

<div class="container">
    <div class="card" id="upgradeCard">
        <h2>âš”ï¸ ë¬´ê¸° ê°•í™” ì‹œë®¬ë ˆì´í„°</h2>
        <p>ë¬´ê¸°ë¥¼ ê°•í™”í•˜ê³  ìˆ˜ì‹ì–´ë¥¼ ëª¨ì•„ë³´ì</p>
    </div>
    <div class="card" id="cardGameCard">
        <h2>ğŸƒ ì¹´ë“œ ê²Œì„</h2>
        <p>íŒíƒ€ì§€ ì„¸ìƒì˜ ì¹´ë“œ ì „íˆ¬</p>
    </div>
</div>

<button id="boardBtn">ğŸ“œ ììœ  ê²Œì‹œíŒ</button>
<button id="showRankingBtn">âš”ï¸ ê°•í™” ìˆœìœ„</button>

<div id="rankingModal">
  <div>
    <h3>ğŸ”¥ ê°•í™” ìˆœìœ„ Top 3</h3>
    <div id="rankingList" style="margin:10px 0;"></div>
    <button id="closeRankingBtn" style="width:100%;">ë‹«ê¸°</button>
  </div>
</div>

<!-- Supabase SDK ë‹¨ 1íšŒë§Œ ë¡œë“œ -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>

<script>
// Supabase ì „ì—­ ê°ì²´ ìƒì„± (ì¤‘ë³µ ì„ ì–¸ ë°©ì§€)
if(!window.sb){
    window.sb = supabase.createClient(
        "https://lpgcfyisclihwlvlxent.supabase.co",
        "sb_publishable_ftA0tc3gS_v48aDVFFpF3g_velgD4y9"
    );
}

// í˜ì´ì§€ ì´ë™
document.getElementById('upgradeCard').addEventListener('click', ()=>{ location.href='games/upgrade/'; });
document.getElementById('cardGameCard').addEventListener('click', ()=>{ location.href='cardgame/'; });
document.getElementById('boardBtn').addEventListener('click', ()=>{ location.href='board/'; });

// ê°•í™” ìˆœìœ„ ëª¨ë‹¬
const rankingModal = document.getElementById("rankingModal");
const rankingList = document.getElementById("rankingList");

document.getElementById("showRankingBtn").addEventListener('click', async ()=>{
    try{
        const { data, error } = await window.sb.from('swordRankings')
            .select('*').order('level',{ascending:false}).limit(3);
        if(error) throw error;
        if(!data || data.length===0){ alert("ë“±ë¡ëœ ê²€ì´ ì—†ìŠµë‹ˆë‹¤."); return; }

        rankingList.innerHTML = data.map((r,i)=>`${i+1}. ${r.owner} - ${r.weapon} Lv.${r.level}`).join("<br>");
        rankingModal.style.display="flex";
    }catch(e){ alert("ìˆœìœ„ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: "+e.message); }
});

document.getElementById("closeRankingBtn").addEventListener('click', ()=>{ rankingModal.style.display="none"; });
</script>
</body>
</html>
